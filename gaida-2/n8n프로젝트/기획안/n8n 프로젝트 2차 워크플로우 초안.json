{
  "name": "My workflow 3",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.formTrigger",
      "typeVersion": 2.3,
      "position": [
        -800,
        -224
      ],
      "id": "bad19513-5a7e-4322-92d4-1659de0a6805",
      "name": "ìë™ì°¨ë“±ë¡ì›ë¶€ ì œì¶œ",
      "webhookId": "277889fd-1cfe-4867-9852-5471705f8868"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOpenAi",
      "typeVersion": 1.2,
      "position": [
        -544,
        -32
      ],
      "id": "61e75454-a7a4-48e6-a435-6559d9e4fb7d",
      "name": "Embeddings OpenAI",
      "credentials": {
        "openAiApi": {
          "id": "7wcbLKPlJUn19hFC",
          "name": "ìˆ˜ì—…ìš© ì¸ì¦"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.documentDefaultDataLoader",
      "typeVersion": 1.1,
      "position": [
        -368,
        -32
      ],
      "id": "4212a674-6f0a-4b11-922e-f71de53792ca",
      "name": "Default Data Loader"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "responses": {
          "values": [
            {}
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        -800,
        208
      ],
      "id": "bc7e0f0a-a8ce-4557-8c05-b66b7c26db07",
      "name": "LLMìœ¼ë¡œ OCR í…ìŠ¤íŠ¸ ë¶„ì„",
      "credentials": {
        "openAiApi": {
          "id": "7wcbLKPlJUn19hFC",
          "name": "ìˆ˜ì—…ìš© ì¸ì¦"
        }
      }
    },
    {
      "parameters": {
        "mode": "insert",
        "memoryKey": {
          "__rl": true,
          "mode": "list",
          "value": "vector_store_key"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.3,
      "position": [
        -496,
        -224
      ],
      "id": "d4273162-b5f0-4311-8606-a660ce65f102",
      "name": "RAG-ë²¡í„°ì— ì €ì¥"
    },
    {
      "parameters": {
        "content": "## 1. ìë™ì°¨ë“±ë¡ì›ë¶€ì˜ í…ìŠ¤íŠ¸ ì¶”ì¶œ ë° RAGì €ì¥\n-ë“±ë¡ì›ë¶€ PDF/ì´ë¯¸ì§€ ì—…ë¡œë“œ\n-http requestë¡œ OCRì‚¬ìš©í•´ í…ìŠ¤íŠ¸(raw)ì¶”ì¶œ\n-RAGì— rawí…ìŠ¤íŠ¸ ì €ì¥",
        "height": 448,
        "width": 688
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -864,
        -352
      ],
      "typeVersion": 1,
      "id": "f68e5274-a7d9-4920-98ab-82208ec57766",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "ê·¸ëŸ¼ RAG ì„¤ì •ì€ ì–´ë–»ê²Œ í•´ì•¼ í•´?\nA) ì¸ë±ì‹±(ì €ì¥) ë‹¨ê³„ ì„¤ì •\n1) ì²­í¬ ë‹¨ìœ„(ì¶”ì²œ)\n\në“±ë¡ì›ë¶€ëŠ” â€œì±•í„°/í•­ëª©â€ì´ ëª…í™•í•´ì„œ\nì˜ë¯¸ ë‹¨ìœ„ë¡œ ìª¼ê°œëŠ” ê²Œ ì¢‹ë‹¤:\n1ì°¨: ê°‘ë¶€ / ì„ë¶€ë¡œ ë‚˜ëˆ„ê¸° (ê°€ëŠ¥í•˜ë©´ ì •ê·œì‹ìœ¼ë¡œ)\n2ì°¨: ì„ë¶€ëŠ” â€œê¶Œë¦¬ë³€ë™ 1ê±´ = 1ì²­í¬â€ì²˜ëŸ¼ ë” ìª¼ê°œê¸°\n\nğŸ“Œ ì²­í¬ í¬ê¸°(ëŒ€ëµ)\n300~800ì ì •ë„(ë„ˆë¬´ ê¸¸ë©´ ê²€ìƒ‰ ì •í™•ë„ ë–¨ì–´ì§)\nì˜¤ë²„ë© 50~100ì ì •ë„\n\n2) ë©”íƒ€ë°ì´í„°(ì¤‘ìš”)\në²¡í„°ìŠ¤í† ì–´ì— ë„£ì„ ë•Œ ë©”íƒ€ë°ì´í„°ë¡œ:\n-section: ê°‘ë¶€/ì„ë¶€\n-doc_id\n-page(ê°€ëŠ¥í•˜ë©´)\n-type: lien/mortgage/seizure ",
        "height": 448,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -224,
        -352
      ],
      "typeVersion": 1,
      "id": "91c58538-1201-45f0-b7b1-106b71abcc4e",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "B) ê²€ìƒ‰(Retrieve) ë‹¨ê³„ ì„¤ì •\n\nì—¬ê¸°ì„œ í•µì‹¬ì€ â€œì§ˆë¬¸ì„ ì–´ë–»ê²Œ ë˜ì§€ëƒâ€ì•¼.\n\n1) ê²€ìƒ‰ ì¿¼ë¦¬ëŠ” â€œí•„ë“œë³„ë¡œâ€ ë”°ë¡œ ë˜ì ¸ë¼\n\nì˜ˆ)\nQuery 1: ì €ë‹¹ ê·¼ì €ë‹¹ ì„¤ì • ì±„ê¶Œìµœê³ ì•¡\nQuery 2: ë§ì†Œ í•´ì§€ í•´ì œ\nQuery 3: ì••ë¥˜ ê°€ì••ë¥˜ ì••ë¥˜ë“±ë¡\nQuery 4: ì´ì „ë“±ë¡ ì œí•œ ì²˜ë¶„ê¸ˆì§€\nQuery 5: ë§ì†Œ ë“±ë¡ì›ë¶€ ë§ì†Œë¶€í™œ\n\nê·¸ë¦¬ê³  ê° ì¿¼ë¦¬ì—ì„œ top_k=3~5 ì •ë„ë¡œ ê°€ì ¸ì™€ì„œ í•©ì¹˜ê¸°.\n\n2) í•„í„°ë¥¼ ê±¸ì–´ë¼\nì˜ˆ: ì €ë‹¹/ì••ë¥˜ëŠ” ëŒ€ë¶€ë¶„ ì„ë¶€ì— ìˆìœ¼ë‹ˆê¹Œ\nsection == ì„ë¶€ í•„í„°\nì´ê±° í•˜ë‚˜ë§Œ ê±¸ì–´ë„ ì„±ëŠ¥ ì²´ê° í¼.",
        "height": 416,
        "width": 288
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        112,
        128
      ],
      "typeVersion": 1,
      "id": "729b83b5-ab36-4c7a-9ab9-6af026a74f1f",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "mode": "retrieve-as-tool",
        "memoryKey": {
          "__rl": true,
          "mode": "list",
          "value": "vector_store_key"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStoreInMemory",
      "typeVersion": 1.3,
      "position": [
        -736,
        368
      ],
      "id": "f1164582-b22b-4456-9b26-6ca0cb5cfb2b",
      "name": "Retreive"
    },
    {
      "parameters": {
        "content": "## 3. LLMìœ¼ë¡œ í•„ìˆ˜ í•„ë“œ ì¶”ì¶œ/ ê²€ì¦ í›„ SQL DBì €ì¥",
        "height": 416,
        "width": 1072
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -864,
        128
      ],
      "typeVersion": 1,
      "id": "c46cf14f-7052-4f37-a807-f44a344847d0",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -160,
        192
      ],
      "id": "2415601f-9c59-48e8-84bd-4e2f23bec958",
      "name": "ë°ì´í„°ì •ì œ"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        224,
        -272
      ],
      "id": "eac6b8e7-6b02-46b0-a40c-eeaa61f3ad0f",
      "name": "ì¶œê³ ê°€ ì‹œì„¸ ê°€ì ¸ì˜¤ê¸°"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        384,
        -272
      ],
      "id": "803a17ca-0bb3-43bc-8f06-d72cf2a65800",
      "name": "ì‹œì„¸ DBì— ì €ì¥",
      "credentials": {
        "postgres": {
          "id": "qZvY1s2Zx8xdabTc",
          "name": "DB-postgressì ‘ê·¼ìš©"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -32,
        192
      ],
      "id": "e43ef178-a9d0-43b5-973c-c4df0c46f540",
      "name": "ì°¨ëŸ‰ DBì— ì €ì¥",
      "credentials": {
        "postgres": {
          "id": "qZvY1s2Zx8xdabTc",
          "name": "DB-postgressì ‘ê·¼ìš©"
        }
      }
    },
    {
      "parameters": {
        "content": "## 2. ì‹œì„¸ë¥¼ DBì— ì €ì¥",
        "height": 272,
        "width": 416
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        160,
        -352
      ],
      "typeVersion": 1,
      "id": "682a689d-252f-4bb7-8f1f-54f3810942fc",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -816,
        656
      ],
      "id": "d58f8938-28d6-442d-a641-eaa0d3a0aba5",
      "name": "2./3. í•„ìˆ˜ ë°ì´í„° í˜¸ì¶œ",
      "credentials": {
        "postgres": {
          "id": "qZvY1s2Zx8xdabTc",
          "name": "DB-postgressì ‘ê·¼ìš©"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "f9ffc10d-f683-40b2-89eb-801c1f720e61",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -320,
        208
      ],
      "id": "19d22bbe-8cf5-46fa-8e95-91318ef49254",
      "name": "If"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -448,
        208
      ],
      "id": "58e61ea2-1158-4964-bf17-09cb184bc79b",
      "name": "LLMì¶”ì¶œ ë‚´ìš© ê²€ì¦"
    },
    {
      "parameters": {
        "content": "**ê²€ì¦ / í™•ì • (ì‹œìŠ¤í…œì´ ì±…ì„ì§€ëŠ” ë‹¨ê³„)**\n\nğŸ”´í•˜ëŠ” ì¼\n\nLLMì´ ë§í•œ ë‚´ìš©ì„ ê·¸ëŒ€ë¡œ ë¯¿ì§€ ì•Šê³ ,\nì½”ë“œ/ë£°ë¡œ ë‹¤ì‹œ í™•ì¸í•œë‹¤.\nì˜ˆì‹œ: â€œì €ë‹¹ ë§ì†Œâ€ ê²€ì¦\nì‹¤ì œ chunk ì•ˆì— ë§ì†Œ/í•´ì§€ ë‹¨ì–´ê°€ ìˆëŠ”ê°€?\në‚ ì§œ ìˆœì„œê°€ ì„¤ì • â†’ ë§ì†Œ ì¸ê°€?\nì„ë¶€ ì„¹ì…˜ì´ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ê°€?\n\nê²°ê³¼ ì²˜ë¦¬\nâœ”ï¸ ê²€ì¦ í†µê³¼ â†’ CONFIRMED\nâ“ ì• ë§¤í•¨ â†’ UNKNOWN\nâŒ ë¶ˆì¼ì¹˜ â†’ FAIL\n\nğŸ”´ ì—¬ê¸°ì„œëŠ” LLMì„ ë‹¤ì‹œ ë¶€ë¥´ì§€ ì•ŠëŠ”ë‹¤\n(if / else, ë¬¸ìì—´ ì²´í¬, ë‚ ì§œ ë¹„êµ)\n\nğŸ“Œ ì´ ë‹¨ê³„ì˜ ê²°ê³¼ë¬¼\nğŸ‘‰ í™•ì •ëœ ì •í˜• ë°ì´í„° (SQL ì €ì¥ìš©)",
        "height": 416,
        "width": 304
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        400,
        128
      ],
      "typeVersion": 1,
      "id": "4005f3c8-839b-4a6f-bc0d-994c89bda4af",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -496,
        656
      ],
      "id": "f1b92b36-35da-4107-8c7e-38216b784f89",
      "name": "ë¡œì§ ì ìš©"
    },
    {
      "parameters": {
        "content": "## 4. ë¡œì§ ì ìš©",
        "height": 256,
        "width": 976
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -864,
        576
      ],
      "typeVersion": 1,
      "id": "63f5e04b-0e1f-4e39-829e-163caaa45686",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -656,
        656
      ],
      "id": "080f3e2a-1b54-40a9-bddd-a438b222867a",
      "name": "ë°ì´í„° ì •ì œ"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 3
          },
          "conditions": [
            {
              "id": "1d2727e5-5145-456b-8339-6dd5851ed501",
              "leftValue": "",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.3,
      "position": [
        -336,
        656
      ],
      "id": "79851ac2-c7d9-4a8a-afff-1d3b4f617396",
      "name": "If:ì‹¤íŒ¨ì‹œ"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        -112,
        640
      ],
      "id": "1304bd7b-6b1f-4fe1-8d0c-02d0f684bd28",
      "name": "ê²°ê³¼ ì €ì¥",
      "credentials": {
        "postgres": {
          "id": "qZvY1s2Zx8xdabTc",
          "name": "DB-postgressì ‘ê·¼ìš©"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "mode": "list",
          "value": ""
        },
        "responses": {
          "values": [
            {}
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2.1,
      "position": [
        -832,
        928
      ],
      "id": "a7058d1f-c27a-410f-94dd-fdddb958854f",
      "name": "ë¦¬í¬íŠ¸ ìƒì„±ê¸°",
      "credentials": {
        "openAiApi": {
          "id": "7wcbLKPlJUn19hFC",
          "name": "ìˆ˜ì—…ìš© ì¸ì¦"
        }
      }
    },
    {
      "parameters": {
        "content": "## 5. ë¦¬í¬íŠ¸ ìƒì„±",
        "height": 288,
        "width": 608
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -864,
        848
      ],
      "typeVersion": 1,
      "id": "04a35c9e-bbe2-485c-8e5f-834d8adbe7f5",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "operation": "addLabels"
      },
      "type": "n8n-nodes-base.gmail",
      "typeVersion": 2.2,
      "position": [
        -512,
        928
      ],
      "id": "bf8bedfb-8154-4d56-a639-23abc7bddb7e",
      "name": "ì–‘ì‹í™”ëœ ë¦¬í¬íŠ¸ ë°œì†¡",
      "webhookId": "43a38bf2-72c3-455a-8d12-44698940a40b",
      "credentials": {
        "gmailOAuth2": {
          "id": "WjGFowbiAFOGpgRC",
          "name": "Gmail account"
        }
      }
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        -656,
        -224
      ],
      "id": "17c8d6c1-cac7-4e4f-8316-0f9c20277dae",
      "name": "OCR"
    }
  ],
  "pinData": {},
  "connections": {
    "ìë™ì°¨ë“±ë¡ì›ë¶€ ì œì¶œ": {
      "main": [
        [
          {
            "node": "OCR",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings OpenAI": {
      "ai_embedding": [
        [
          {
            "node": "RAG-ë²¡í„°ì— ì €ì¥",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Default Data Loader": {
      "ai_document": [
        [
          {
            "node": "RAG-ë²¡í„°ì— ì €ì¥",
            "type": "ai_document",
            "index": 0
          }
        ]
      ]
    },
    "LLMìœ¼ë¡œ OCR í…ìŠ¤íŠ¸ ë¶„ì„": {
      "main": [
        [
          {
            "node": "LLMì¶”ì¶œ ë‚´ìš© ê²€ì¦",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "RAG-ë²¡í„°ì— ì €ì¥": {
      "main": [
        []
      ]
    },
    "Retreive": {
      "ai_tool": [
        [
          {
            "node": "LLMìœ¼ë¡œ OCR í…ìŠ¤íŠ¸ ë¶„ì„",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "ë°ì´í„°ì •ì œ": {
      "main": [
        [
          {
            "node": "ì°¨ëŸ‰ DBì— ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ì¶œê³ ê°€ ì‹œì„¸ ê°€ì ¸ì˜¤ê¸°": {
      "main": [
        [
          {
            "node": "ì‹œì„¸ DBì— ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "2./3. í•„ìˆ˜ ë°ì´í„° í˜¸ì¶œ": {
      "main": [
        [
          {
            "node": "ë°ì´í„° ì •ì œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "LLMì¶”ì¶œ ë‚´ìš© ê²€ì¦": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "ë°ì´í„°ì •ì œ",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "LLMìœ¼ë¡œ OCR í…ìŠ¤íŠ¸ ë¶„ì„",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë°ì´í„° ì •ì œ": {
      "main": [
        [
          {
            "node": "ë¡œì§ ì ìš©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë¡œì§ ì ìš©": {
      "main": [
        [
          {
            "node": "If:ì‹¤íŒ¨ì‹œ",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If:ì‹¤íŒ¨ì‹œ": {
      "main": [
        [
          {
            "node": "ê²°ê³¼ ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ë¦¬í¬íŠ¸ ìƒì„±ê¸°": {
      "main": [
        [
          {
            "node": "ì–‘ì‹í™”ëœ ë¦¬í¬íŠ¸ ë°œì†¡",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OCR": {
      "main": [
        [
          {
            "node": "RAG-ë²¡í„°ì— ì €ì¥",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "853e1bd0-8b47-45a8-a2b5-fca305b8f741",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "a12c56532dab232f437503c148273a4f24cad9a15985d78a9cf2116c7dcd9ea0"
  },
  "id": "z0X9t8tcBfWTKD9N",
  "tags": []
}